# -*- encoding:utf-8 -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 6
_modified_time = 1352379098.222091
_template_filename='/var/www/feelicity/20120625120040/tedx/templates/admin.mako'
_template_uri='/admin.mako'
_template_cache=cache.Cache(__name__, _modified_time)
_source_encoding='utf-8'
from webhelpers.html import escape
_exports = []


def render_body(context,**pageargs):
    context.caller_stack._push_frame()
    try:
        __M_locals = __M_dict_builtin(pageargs=pageargs)
        __M_writer = context.writer()
        # SOURCE LINE 2
        __M_writer(u'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n\t<head>\n\t\t<title>\n\t\t\tAdministraci\xf3n\t\n\t\t</title>\n\t\t<script type="text/javascript" src="/js/jquery-1.6.2.min.js">\n        </script>\n        <script type="text/javascript" src="/js/jquery.json-2.2.min.js">\n        </script>\n\t\t<link rel="stylesheet" type="text/css" href="/css/jquery-ui-1.8.9.custom.css" />\n\t\t<link rel="stylesheet" type="text/css" href="/css/tablesorterstyle.css" />\n\t\t<script type="text/javascript" src="/js/jquery-ui-1.8.9.custom.min.js"></script>\n\t\t<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>\n\t\t<script type="text/javascript">\n\t\t\tinit = function(){\n\t\t\t\t$(\'#example\').tabs();\n\t\t\t\t$(\'#search_button\').button();\n\t\t\t\t$(\'#delete_button\').button();\n\t\t\t\t$(\'#save_button\').button();\n\t\t\t\tusers();\n\t\t\t\t\n\t\t\t}\n\t\t\tsearcho = function(){\n\t\t\t\tif ($(\'#type\').attr(\'value\') == "users") {\n\t\t\t\t\tusers();\n\t\t\t\t} else if ($(\'#type\').attr(\'value\') == "places") {\n\t\t\t\t\tplaces();\n\t\t\t\t} else {\n\t\t\t\t\tcomments();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tusers = function(){\n\t\t\t\t$(\'#type\').attr(\'value\',\'users\');\n\t\t\t\t$(\'#results\').empty();\n\t\t\t\t$(\'#results\').append($(\'<img src="images/loading.gif"/>\'));\n\t\t\t\t$.ajax({\n\t\t\t        url: \'/admin/search\',\n\t\t\t        type: \'GET\',\n\t\t\t        async: true,\n\t\t\t        cache: false,\n\t\t\t        data: {\n\t\t\t            \'type\' : \'users\',\n\t\t\t\t\t\t\'query\': $(\'#search\').attr(\'value\')\n\t\t\t\t\t},\n\t\t\t        success: function(responseText){\n\t\t\t\t\t\tvar users = $.parseJSON(responseText).results;\n\t\t\t\t\t\t$(\'#results\').empty();\n\t\t\t\t\t\tif (users.length >0){\n\t\t\t\t\t\t\tvar table = $(\'<table id="table_results" class="tablesorter"></table>\');\n\t\t\t\t\t\t\ttable.append($(\'<thead><tr><th></th><th>id</th><th>nickname</th><th>email</th>')
        # SOURCE LINE 54
        __M_writer(u'\t\t\t\t\t\t\t<th>avatar</th><th>description</th> ')
        # SOURCE LINE 55
        __M_writer(u'\t\t\t\t\t\t\t<th>created_on</th><th>deleted_on</th><th>last_activity</th>')
        # SOURCE LINE 56
        __M_writer(u'\t\t\t\t\t\t\t<th>longitude</th><th>latitude</th></tr></thead>\'));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar tbody = $(\'<tbody></tbody>\');\n\t\t\t\t\t\t\tfor (var i=0; i<users.length; i++){\n\t\t\t\t\t\t\t\ttbody.append($(\'<tr><td><input name="checkbox" value="\'+users[i].id+\'" id="\'+users[i].id+\'_checkbox" type="checkbox"></input></td><td>\'+users[i].id+\'</td><td><input id="\'+users[i].id+\'_nickname" value="\'+users[i].nickname+\'"></input></td><td><input id="\'+users[i].id+\'_email" value="\'+users[i].email+\'"></input></td>')
        # SOURCE LINE 61
        __M_writer(u"\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+users[i].avatar+'</td>")
        # SOURCE LINE 62
        __M_writer(u'\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><input id="\'+users[i].id+\'_description" value="\'+users[i].description+\'"></input></td>')
        # SOURCE LINE 63
        __M_writer(u"\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+users[i].created_on+'</td><td>'+users[i].deleted_on+'</td><td>'+users[i].last_activity+'</td>")
        # SOURCE LINE 64
        __M_writer(u'\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><input id="\'+users[i].id+\'_longitude" value="\'+users[i].longitude+\'"></input></td><td><input id="\'+users[i].id+\'_latitude" value="\'+users[i].latitude+\'"></input></td></tr>\'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttable.append(tbody);\n\t\t\t\t\t\t\t$(\'#results\').append(table);\n\t\t\t\t\t\t\t$(\'#table_results\').tablesorter();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(\'#results\').append("No se han encontrado resultados");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t\t\n\t\t\tplaces = function(){\n\t\t\t\t$(\'#type\').attr(\'value\',\'places\');\n\t\t\t\t$(\'#results\').empty();\n\t\t\t\t$(\'#results\').append($(\'<img src="images/loading.gif"/>\'));\n\t\t\t\t$.ajax({\n\t\t\t        url: \'/admin/search\',\n\t\t\t        type: \'GET\',\n\t\t\t        async: true,\n\t\t\t        cache: false,\n\t\t\t        data: {\n\t\t\t            \'type\' : \'places\',\n\t\t\t\t\t\t\'query\': $(\'#search\').attr(\'value\')\n\t\t\t\t\t},\n\t\t\t        success: function(responseText){\n\t\t\t\t\t\tvar users = $.parseJSON(responseText).results;\n\t\t\t\t\t\t$(\'#results\').empty();\n\t\t\t\t\t\tif (users.length >0){\n\t\t\t\t\t\t\tvar table = $(\'<table id="table_results" class="tablesorter"></table>\');\n\t\t\t\t\t\t\ttable.append($(\'<thead><tr><th></th><th>id</th><th>name</th><th>user_id</th><th>user_name</th><th>longitude</th><th>latitude</th>')
        # SOURCE LINE 95
        __M_writer(u'\t\t\t\t\t\t\t<th>visits</th><th>created_on</th></tr></thead>\'));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar tbody = $(\'<tbody></tbody>\');\n\t\t\t\t\t\t\tvar geocoder = new google.maps.Geocoder();\n    \t\t\t\t\t\t\t\n\t\t\t\t\t\t\tfor (var i=0; i<users.length; i++){\n\t\t\t\t\t\t\t\ttbody.append($(\'<tr><td><input name="checkbox" value="\'+users[i].id+\'" id="\'+users[i].id+\'_checkbox" type="checkbox"></input></td><td>\'+users[i].id+\'</td><td><input id="\'+users[i].id+\'_name" value="\'+users[i].name+\'"></input></td><td>\'+users[i].user_id+\'</td><td><input id="\'+users[i].id+\'_user_name" value="\'+users[i].user_name+\'"></input></td>')
        # SOURCE LINE 102
        __M_writer(u'\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><input id="\'+users[i].id+\'_longitude" value="\'+users[i].longitude+\'"></input></td><td><input id="\'+users[i].id+\'_latitude" value="\'+users[i].latitude+\'"></input></td><td><input id="\'+users[i].id+\'_visits" value="\'+users[i].visits+\'"></input></td>')
        # SOURCE LINE 103
        __M_writer(u'\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\'+users[i].created_on+\'</td></tr>\'));\n\t\t\t\t\t\t\t\t//update_location(users[i].id, users[i].latitude, users[i].longitude);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttable.append(tbody);\n\t\t\t\t\t\t\t$(\'#results\').append(table);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(\'#results\').append("No se han encontrado resultados");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t\t\n\t\t\tupdate_location = function(id,lat,lng){\n\t\t\t\t\n\t\t\t\tvar geocoder = new google.maps.Geocoder();\n\t\t\t\tvar latlng = new google.maps.LatLng(lat, lng);\n    \t\t\t\t\t\t\tvar city;\n    \t\t\t\t\t\t\tvar country;\n    \t\t\t\t\t\t\t\tif (geocoder) {\n\t\t\t\t\t\t\t\t      geocoder.geocode({\'latLng\': latlng}, function(results, status) {\n\t\t\t\t\t\t\t\t    \tif (status == google.maps.GeocoderStatus.OK) {\n\t\t\t\t\t\t\t\t          var address = results[0].address_components;\n\t\t\t\t\t\t\t\t          for (var a=0; a< address.length; a++){\n\t\t\t\t\t\t\t\t        \t  if (address[a].types[0] == "locality"){\n\t\t\t\t\t\t\t\t        \t\t  city = address[a].long_name;\n\t\t\t\t\t\t\t\t        \t  }\n\t\t\t\t\t\t\t\t        \t  if (address[a].types[0] == "country"){\n\t\t\t\t\t\t\t\t        \t\t  country = address[a].long_name;\n\t\t\t\t\t\t\t\t        \t  }\n\t\t\t\t\t\t\t\t          }\n\t\t\t\t\t\t\t\t          $.ajax({\n\t\t\t\t\t\t\t\t\t  \t      url: \'/admin/update_place\',\n\t\t\t\t\t\t\t\t\t  \t      type: \'GET\',\n\t\t\t\t\t\t\t\t\t  \t      async: true,\n\t\t\t\t\t\t\t\t\t  \t      cache: false,\n\t\t\t\t\t\t\t\t\t  \t      data: {\n\t\t\t\t\t\t\t\t\t  \t      \t  \'id\' : id,\n\t\t\t\t\t\t\t\t\t  \t          \'city\' : city,\n\t\t\t\t\t\t\t\t\t  \t          \'country\' : country,\n\t\t\t\t\t\t\t\t\t  \t         },\n\t\t\t\t\t\t\t\t\t  \t      success: function(responseText){\n\t\t\t\t\t\t\t\t\t  \t      \talert(\'ok\');\n\t\t\t\t\t\t\t\t\t  \t      }\n\t\t\t\t\t\t\t\t\t  \t      \n\t\t\t\t\t\t\t\t\t  \t    });\n\t\t\t\t\t\t\t\t        } else {\n\t\t\t\t\t\t\t\t          alert("Geocoder failed due to: " + status);\n\t\t\t\t\t\t\t\t        }\n\t\t\t\t\t\t\t\t      });\n\t\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tcomments = function(){\n\t\t\t\t$(\'#type\').attr(\'value\',\'comments\');\n\t\t\t\t$(\'#results\').empty();\n\t\t\t\t$(\'#results\').append($(\'<img src="images/loading.gif"/>\'));\n\t\t\t\t$.ajax({\n\t\t\t        url: \'/admin/search\',\n\t\t\t        type: \'GET\',\n\t\t\t        async: true,\n\t\t\t        cache: false,\n\t\t\t        data: {\n\t\t\t            \'type\' : \'comments\',\n\t\t\t\t\t\t\'query\': $(\'#search\').attr(\'value\')\n\t\t\t\t\t},\n\t\t\t        success: function(responseText){\n\t\t\t\t\t\tvar users = $.parseJSON(responseText).results;\n\t\t\t\t\t\t$(\'#results\').empty();\n\t\t\t\t\t\tif (users.length >0){\n\t\t\t\t\t\t\tvar table = $(\'<table id="table_results" class="tablesorter"></table>\');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar table = $(\'<table id="table_results" class="tablesorter"></table>\');\n\t\t\t\t\t\t\ttable.append($(\'<thead><tr><th></th><th>id</th><th>place_id</th><th>user_id</th><th>longitude</th><th>latitude</th>')
        # SOURCE LINE 179
        __M_writer(u'\t\t\t\t\t\t\t<th>title</th><th>content</th><th>created_on</th></tr></thead>\'));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar tbody = $(\'<tbody></tbody>\');\n\t\t\t\t\t\t\tfor (var i=0; i<users.length; i++){\n\t\t\t\t\t\t\t\ttbody.append($(\'<tr><td><input name="checkbox" value="\'+users[i].id+\'" id="\'+users[i].id+\'_checkbox" type="checkbox"></input></td><td>\'+users[i].id+\'</td><td>\'+users[i].place_id+\'</td><td>\'+users[i].user_id+\'</td><td><input id="\'+users[i].id+\'_longitude" value="\'+users[i].longitude+\'"></input></td>')
        # SOURCE LINE 184
        __M_writer(u'\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><input id="\'+users[i].id+\'_latitude" value="\'+users[i].latitude+\'"></input></td><td><input id="\'+users[i].id+\'_title" value="\'+users[i].title+\'"></input></td><td><input id="\'+users[i].id+\'_content" value="\'+users[i].content+\'"></input></td><td>\'+users[i].created_on+\'</td>')
        # SOURCE LINE 185
        __M_writer(u'\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttable.append(tbody);\n\t\t\t\t\t\t\t$(\'#results\').append(table);\n\t\t\t\t\t\t\t$(\'#table_results\').tablesorter();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(\'#results\').append("No se han encontrado resultados");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t\t\n\t\t\tdelete_entity = function(){\n\t\t\t\tvar elements = document.getElementsByName("checkbox");\n\t\t\t\tvar to_delete = new Array();\n\t\t\t\tfor (i=0; i<elements.length; i++){\n\t\t\t\t\tif (elements[i].checked) {\n\t\t\t\t\t\tto_delete.push(elements[i].value);\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t\t$.ajax({\n\t\t\t        url: \'/admin/delete_entity\',\n\t\t\t        type: \'GET\',\n\t\t\t        async: true,\n\t\t\t        cache: false,\n\t\t\t        data: {\n\t\t\t            \'ids\' : $.toJSON(to_delete),\n\t\t\t\t\t\t\'type\' : $(\'#type\').attr(\'value\')\n\t\t\t\t\t},\n\t\t\t        success: function(responseText){\n\t\t\t\t\t\tif (responseText == "OK"){\n\t\t\t\t\t\t\talert(\'OK\');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\talert(\'Error\');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\t\n\t\t\t}\n\t\t\t\n\t\t\tsave_entities = function(){\n\t\t\t\tvar elements = document.getElementsByName("checkbox");\n\t\t\t\tvar to_update = new Array();\n\t\t\t\tfor (i=0; i<elements.length; i++){\n\t\t\t\t\tif (elements[i].checked) {\n\t\t\t\t\t\tto_update.push(elements[i].value);\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t\tfor (var i =0; i < to_update.length; i++){\n\t\t\t\t\tif ($(\'#type\').attr(\'value\')=="users"){\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t        url: \'/admin/update_entity\',\n\t\t\t\t\t        type: \'GET\',\n\t\t\t\t\t        async: true,\n\t\t\t\t\t        cache: false,\n\t\t\t\t\t        data: {\n\t\t\t\t\t            \'type\' : $(\'#type\').attr(\'value\')\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t},\n\t\t\t\t\t        \n\t\t\t\t\t\t});\n\t\t\t\t\t} else if($(\'#type\').attr(\'value\')=="places"){\n\t\t\t\t\t\t\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t        url: \'/admin/update_entity\',\n\t\t\t\t\t        type: \'GET\',\n\t\t\t\t\t        async: true,\n\t\t\t\t\t        cache: false,\n\t\t\t\t\t        data: {\n\t\t\t\t\t            \'type\' : $(\'#type\').attr(\'value\'),\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t},\n\t\t\t\t\t        \n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t        url: \'/admin/update_entity\',\n\t\t\t\t\t        type: \'GET\',\n\t\t\t\t\t        async: true,\n\t\t\t\t\t        cache: false,\n\t\t\t\t\t        data: {\n\t\t\t\t\t            \'type\' : $(\'#type\').attr(\'value\'),\n\t\t\t\t\t\t\t\t\'id\' : $(\'#\'+to_update[i]+\'_checkbox\').attr(\'value\'),\n\t\t\t\t\t\t\t\t\'longitude\': $(\'#\'+to_update[i]+\'_longitude\').attr(\'value\'),\n\t\t\t\t\t\t\t\t\'latitude\': $(\'#\'+to_update[i]+\'_latitude\').attr(\'value\'),\n\t\t\t\t\t\t\t\t\'title\' : $(\'#\'+to_update[i]+\'_title\').attr(\'value\'),\n\t\t\t\t\t\t\t\t\'content\': $(\'#\'+to_update[i]+\'_content\').attr(\'value\')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t   });\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t\talert(\'OK\');\n\t\t\t}\n\t\t\t\n\t\t</script>\n\t</head>\n\t<body onload="init();">\n\t\t<h2>Administraci\xf3n</h2>\n\t\t<div>\n\t\t\t<input id="search" type="text"><div id="search_button"><a href="javascript:void(0);" onclick="searcho();">B\xfasqueda</a></div></input>\n\t\t</div>\n\t\t\n\t\t<div id="example" style="margin-top:20px;">\n\t\t\t<ul>\n\t\t\t\t<li><a href="javascript:void(0);" onclick="users();">Usuarios</a></li>\n\t\t\t\t<li><a href="javascript:void(0)"  onclick="places();">Lugares</a></li>\n\t\t\t\t<li><a href="javascript:void(0);" onclick="comments();">Comentarios</a></li>\n\t\t\t</ul>\n\t\t\t<input id="type" type="hidden" value="users"></input>\n\t\t</div>\n\t\t<div id="results">\n\t\t</div>\n\t\t<div> \n\t\t\t<div id="delete_button" onclick="delete_entity();">Eliminar</div>\n\t\t\t<div id="save_button" onclick="save_entities();">Guardar</div>\n\t\t</div>\n\t</body>\n</html>')
        return ''
    finally:
        context.caller_stack._pop_frame()


